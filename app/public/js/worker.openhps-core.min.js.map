{"version":3,"file":"web/worker.openhps-core.min.js","mappings":"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","sources":["webpack://@openhps/core/webpack/universalModuleDefinition","webpack://@openhps/core/./dist/cjs/worker/WorkerBase.js","webpack://@openhps/core/./dist/cjs/worker/ sync","webpack://@openhps/core/./node_modules/debug/src/browser.js","webpack://@openhps/core/./node_modules/debug/src/common.js","webpack://@openhps/core/./node_modules/is-observable/index.js","webpack://@openhps/core/./node_modules/ms/index.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/_scheduler.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/_symbols.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/observable.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/unsubscribe.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/filter.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/flatMap.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/_util.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/interval.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/map.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/merge.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/subject.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/multicast.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/scan.js","webpack://@openhps/core/./node_modules/reflect-metadata/Reflect.js","webpack://@openhps/core/./node_modules/threads/dist/common.js","webpack://@openhps/core/./node_modules/threads/dist/index.js","webpack://@openhps/core/./node_modules/threads/dist/master/get-bundle-url.browser.js","webpack://@openhps/core/./node_modules/threads/dist/master/implementation.browser.js","webpack://@openhps/core/./node_modules/threads/dist/master/index.js","webpack://@openhps/core/./node_modules/threads/dist/master/invocation-proxy.js","webpack://@openhps/core/./node_modules/threads/dist/master/pool-types.js","webpack://@openhps/core/./node_modules/threads/dist/master/pool.js","webpack://@openhps/core/./node_modules/threads/dist/master/spawn.js","webpack://@openhps/core/./node_modules/threads/dist/master/thread.js","webpack://@openhps/core/./node_modules/threads/dist/observable-promise.js","webpack://@openhps/core/./node_modules/threads/dist/observable.js","webpack://@openhps/core/./node_modules/threads/dist/ponyfills.js","webpack://@openhps/core/./node_modules/threads/dist/promise.js","webpack://@openhps/core/./node_modules/threads/dist/serializers.js","webpack://@openhps/core/./node_modules/threads/dist/symbols.js","webpack://@openhps/core/./node_modules/threads/dist/transferable.js","webpack://@openhps/core/./node_modules/threads/dist/types/master.js","webpack://@openhps/core/./node_modules/threads/dist/types/messages.js","webpack://@openhps/core/./node_modules/threads/dist/worker/implementation.browser.js","webpack://@openhps/core/./node_modules/threads/dist/worker/index.js","webpack://@openhps/core/./node_modules/threads/observable.js","webpack://@openhps/core/external umd \"@openhps/core\"","webpack://@openhps/core/webpack/bootstrap","webpack://@openhps/core/webpack/runtime/define property getters","webpack://@openhps/core/webpack/runtime/global","webpack://@openhps/core/webpack/runtime/hasOwnProperty shorthand","webpack://@openhps/core/webpack/runtime/make namespace object","webpack://@openhps/core/","webpack://@openhps/core/./dist/cjs/worker/WorkerRunner.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@openhps/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@openhps/core\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@openhps/core\")) : factory(root[\"@openhps/core\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})((typeof self !== 'undefined' ? self : this), (__WEBPACK_EXTERNAL_MODULE__276__) => {\nreturn ","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkerBase = void 0;\nrequire(\"reflect-metadata\");\nconst observable_1 = require(\"threads/observable\");\nconst __1 = require(\"..\"); // external @openhps/core\nclass WorkerBase {\n    constructor() {\n        this.pullOutput = new observable_1.Subject();\n        this.pushOutput = new observable_1.Subject();\n        this.serviceOutputCall = new observable_1.Subject();\n        this.serviceOutputResponse = new observable_1.Subject();\n        this.eventOutput = new observable_1.Subject();\n    }\n    setShape(shape) {\n        this.shape = shape;\n    }\n    init(config) {\n        return new Promise((resolve, reject) => {\n            this.config = config;\n            // Set global dir name\n            // eslint-disable-next-line no-global-assign\n            __dirname = config.directory;\n            // Load external scripts\n            if (config.imports && config.imports.length > 0) {\n                const importFn = require === undefined ? importScripts : require;\n                config.imports.forEach((importFile) => {\n                    importFn(importFile);\n                });\n            }\n            // Create model\n            const modelBuilder = __1.ModelBuilder.create();\n            // Add remote worker services if not already added\n            this.config.services.forEach((service) => {\n                if (service.dataType) {\n                    const DataType = __1.DataSerializer.findTypeByName(service.dataType);\n                    modelBuilder.addService(new __1.DummyDataService(service.uid, DataType), new __1.WorkerServiceProxy({\n                        uid: service.uid,\n                        callObservable: this.serviceOutputCall,\n                        responseObservable: this.serviceOutputResponse,\n                    }));\n                }\n                else {\n                    modelBuilder.addService(new __1.DummyService(service.uid), new __1.WorkerServiceProxy({\n                        uid: service.uid,\n                        callObservable: this.serviceOutputCall,\n                        responseObservable: this.serviceOutputResponse,\n                    }));\n                }\n            });\n            this._initModel(modelBuilder);\n            // eslint-disable-next-line\n            const path = this.config.imports.length > 0 ? undefined : require('path');\n            if (this.config.serialized) {\n                const traversalBuilder = modelBuilder.from();\n                const modelOrNode = __1.ModelSerializer.deserializeNode(this.config.serialized);\n                traversalBuilder.via(modelOrNode);\n                traversalBuilder.to();\n            }\n            else if (this.config.builder) {\n                const traversalBuilder = modelBuilder.from();\n                // eslint-disable-next-line\n                const builderCallback = eval(this.config.builder);\n                builderCallback(traversalBuilder, modelBuilder, this.config.args);\n                traversalBuilder.to();\n            }\n            else if (this.config.shape) {\n                // eslint-disable-next-line\n                const graph = require(path ? path.join(__dirname, this.config.shape) : this.config.shape);\n                if (graph) {\n                    modelBuilder.addShape(graph.default);\n                }\n            }\n            else if (this.shape) {\n                modelBuilder.addShape(this.shape);\n            }\n            modelBuilder\n                .build()\n                .then((m) => {\n                this.model = m;\n                resolve();\n            })\n                .catch(reject);\n        });\n    }\n    /**\n     * Pull from this work\n     *\n     * @param {PullOptions} [options] Pull options\n     * @returns {Promise<void>} Pull promise\n     */\n    pull(options) {\n        return this.model.pull(options);\n    }\n    /**\n     * Push to this worker\n     *\n     * @param {DataFrame} frame Data frame\n     * @param {PushOptions} [options] Push options\n     * @returns {Promise<void>} Push promise\n     */\n    push(frame, options) {\n        return this.model.push(__1.DataSerializer.deserialize(frame), options);\n    }\n    /**\n     * Init the model internal input and internal output\n     *\n     * @param {ModelBuilder} modelBuilder Model builder\n     */\n    _initModel(modelBuilder) {\n        const internalSource = new __1.CallbackSourceNode((options) => {\n            // Send a pull request to the main thread\n            this.pullOutput.next(options);\n            return undefined;\n        });\n        const internalSink = new __1.CallbackSinkNode((frame) => {\n            // Serialize the frame and transmit it to the main thread\n            this.pushOutput.next(__1.DataSerializer.serialize(frame));\n        });\n        modelBuilder.graph.deleteNode(modelBuilder.graph.internalSource);\n        modelBuilder.graph.internalSource = internalSource;\n        internalSource.on('error', (event) => {\n            this.eventOutput.next({\n                name: 'error',\n                event,\n            });\n        });\n        internalSource.on('completed', (event) => {\n            this.eventOutput.next({\n                name: 'completed',\n                event,\n            });\n        });\n        modelBuilder.graph.addNode(modelBuilder.graph.internalSource);\n        modelBuilder.graph.deleteNode(modelBuilder.graph.internalSink);\n        modelBuilder.graph.internalSink = internalSink;\n        modelBuilder.graph.addNode(modelBuilder.graph.internalSink);\n    }\n    findAllServices() {\n        return new Promise((resolve) => {\n            const services = this.model.findAllServices();\n            const servicesArray = services\n                .filter((service) => !(service instanceof __1.DummyDataService || service instanceof __1.DummyService))\n                .map((service) => {\n                // Services are wrapped in a proxy. Get prototype\n                const serviceBase = Object.getPrototypeOf(service);\n                return {\n                    uid: service.uid,\n                    type: serviceBase.constructor.name,\n                    dataType: service instanceof __1.DataService ? service.driver.dataType.name : undefined,\n                };\n            });\n            resolve(servicesArray);\n        });\n    }\n    callService(call) {\n        return new Promise((resolve, reject) => {\n            const service = this.model.findDataService(call.serviceUID) || this.model.findService(call.serviceUID);\n            if (service[call.method]) {\n                const serializedParams = call.parameters;\n                const params = [];\n                serializedParams.forEach((param) => {\n                    if (param['__type']) {\n                        params.push(__1.DataSerializer.deserialize(param));\n                    }\n                    else {\n                        params.push(param);\n                    }\n                });\n                const promise = service[call.method](...params);\n                Promise.resolve(promise)\n                    .then((_) => {\n                    if (Array.isArray(_)) {\n                        const result = [];\n                        _.forEach((r) => {\n                            result.push(__1.DataSerializer.serialize(r));\n                        });\n                        resolve({ id: call.id, success: true, result });\n                    }\n                    else {\n                        const result = __1.DataSerializer.serialize(_);\n                        resolve({ id: call.id, success: true, result });\n                    }\n                })\n                    .catch((ex) => {\n                    reject({ id: call.id, success: false, result: ex });\n                });\n            }\n        });\n    }\n}\nexports.WorkerBase = WorkerBase;\n//# sourceMappingURL=WorkerBase.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 614;\nmodule.exports = webpackEmptyContext;","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","'use strict';\n\nmodule.exports = value => {\n\tif (!value) {\n\t\treturn false;\n\t}\n\n\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\tif (typeof Symbol.observable === 'symbol' && typeof value[Symbol.observable] === 'function') {\n\t\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\t\treturn value === value[Symbol.observable]();\n\t}\n\n\tif (typeof value['@@observable'] === 'function') {\n\t\treturn value === value['@@observable']();\n\t}\n\n\treturn false;\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport class AsyncSerialScheduler {\n    constructor(observer) {\n        this._baseObserver = observer;\n        this._pendingPromises = new Set();\n    }\n    complete() {\n        Promise.all(this._pendingPromises)\n            .then(() => this._baseObserver.complete())\n            .catch(error => this._baseObserver.error(error));\n    }\n    error(error) {\n        this._baseObserver.error(error);\n    }\n    schedule(task) {\n        const prevPromisesCompletion = Promise.all(this._pendingPromises);\n        const values = [];\n        const next = (value) => values.push(value);\n        const promise = Promise.resolve()\n            .then(() => __awaiter(this, void 0, void 0, function* () {\n            yield prevPromisesCompletion;\n            yield task(next);\n            this._pendingPromises.delete(promise);\n            for (const value of values) {\n                this._baseObserver.next(value);\n            }\n        }))\n            .catch(error => {\n            this._pendingPromises.delete(promise);\n            this._baseObserver.error(error);\n        });\n        this._pendingPromises.add(promise);\n    }\n}\n","export const hasSymbols = () => typeof Symbol === \"function\";\nexport const hasSymbol = (name) => hasSymbols() && Boolean(Symbol[name]);\nexport const getSymbol = (name) => hasSymbol(name) ? Symbol[name] : \"@@\" + name;\nexport function registerObservableSymbol() {\n    if (hasSymbols() && !hasSymbol(\"observable\")) {\n        Symbol.observable = Symbol(\"observable\");\n    }\n}\nif (!hasSymbol(\"asyncIterator\")) {\n    Symbol.asyncIterator = Symbol.asyncIterator || Symbol.for(\"Symbol.asyncIterator\");\n}\n","/**\n * Based on <https://raw.githubusercontent.com/zenparsing/zen-observable/master/src/Observable.js>\n * At commit: f63849a8c60af5d514efc8e9d6138d8273c49ad6\n */\nimport \"./symbols\";\nimport { getSymbol, hasSymbol, hasSymbols } from \"./_symbols\";\nconst SymbolIterator = getSymbol(\"iterator\");\nconst SymbolObservable = getSymbol(\"observable\");\nconst SymbolSpecies = getSymbol(\"species\");\n// === Abstract Operations ===\nfunction getMethod(obj, key) {\n    const value = obj[key];\n    if (value == null) {\n        return undefined;\n    }\n    if (typeof value !== \"function\") {\n        throw new TypeError(value + \" is not a function\");\n    }\n    return value;\n}\nfunction getSpecies(obj) {\n    let ctor = obj.constructor;\n    if (ctor !== undefined) {\n        ctor = ctor[SymbolSpecies];\n        if (ctor === null) {\n            ctor = undefined;\n        }\n    }\n    return ctor !== undefined ? ctor : Observable;\n}\nfunction isObservable(x) {\n    return x instanceof Observable; // SPEC: Brand check\n}\nfunction hostReportError(error) {\n    if (hostReportError.log) {\n        hostReportError.log(error);\n    }\n    else {\n        setTimeout(() => { throw error; }, 0);\n    }\n}\nfunction enqueue(fn) {\n    Promise.resolve().then(() => {\n        try {\n            fn();\n        }\n        catch (e) {\n            hostReportError(e);\n        }\n    });\n}\nfunction cleanupSubscription(subscription) {\n    const cleanup = subscription._cleanup;\n    if (cleanup === undefined) {\n        return;\n    }\n    subscription._cleanup = undefined;\n    if (!cleanup) {\n        return;\n    }\n    try {\n        if (typeof cleanup === \"function\") {\n            cleanup();\n        }\n        else {\n            const unsubscribe = getMethod(cleanup, \"unsubscribe\");\n            if (unsubscribe) {\n                unsubscribe.call(cleanup);\n            }\n        }\n    }\n    catch (e) {\n        hostReportError(e);\n    }\n}\nfunction closeSubscription(subscription) {\n    subscription._observer = undefined;\n    subscription._queue = undefined;\n    subscription._state = \"closed\";\n}\nfunction flushSubscription(subscription) {\n    const queue = subscription._queue;\n    if (!queue) {\n        return;\n    }\n    subscription._queue = undefined;\n    subscription._state = \"ready\";\n    for (const item of queue) {\n        notifySubscription(subscription, item.type, item.value);\n        if (subscription._state === \"closed\") {\n            break;\n        }\n    }\n}\nfunction notifySubscription(subscription, type, value) {\n    subscription._state = \"running\";\n    const observer = subscription._observer;\n    try {\n        const m = observer ? getMethod(observer, type) : undefined;\n        switch (type) {\n            case \"next\":\n                if (m)\n                    m.call(observer, value);\n                break;\n            case \"error\":\n                closeSubscription(subscription);\n                if (m)\n                    m.call(observer, value);\n                else\n                    throw value;\n                break;\n            case \"complete\":\n                closeSubscription(subscription);\n                if (m)\n                    m.call(observer);\n                break;\n        }\n    }\n    catch (e) {\n        hostReportError(e);\n    }\n    if (subscription._state === \"closed\") {\n        cleanupSubscription(subscription);\n    }\n    else if (subscription._state === \"running\") {\n        subscription._state = \"ready\";\n    }\n}\nfunction onNotify(subscription, type, value) {\n    if (subscription._state === \"closed\") {\n        return;\n    }\n    if (subscription._state === \"buffering\") {\n        subscription._queue = subscription._queue || [];\n        subscription._queue.push({ type, value });\n        return;\n    }\n    if (subscription._state !== \"ready\") {\n        subscription._state = \"buffering\";\n        subscription._queue = [{ type, value }];\n        enqueue(() => flushSubscription(subscription));\n        return;\n    }\n    notifySubscription(subscription, type, value);\n}\nexport class Subscription {\n    constructor(observer, subscriber) {\n        // ASSERT: observer is an object\n        // ASSERT: subscriber is callable\n        this._cleanup = undefined;\n        this._observer = observer;\n        this._queue = undefined;\n        this._state = \"initializing\";\n        const subscriptionObserver = new SubscriptionObserver(this);\n        try {\n            this._cleanup = subscriber.call(undefined, subscriptionObserver);\n        }\n        catch (e) {\n            subscriptionObserver.error(e);\n        }\n        if (this._state === \"initializing\") {\n            this._state = \"ready\";\n        }\n    }\n    get closed() {\n        return this._state === \"closed\";\n    }\n    unsubscribe() {\n        if (this._state !== \"closed\") {\n            closeSubscription(this);\n            cleanupSubscription(this);\n        }\n    }\n}\nexport class SubscriptionObserver {\n    constructor(subscription) { this._subscription = subscription; }\n    get closed() { return this._subscription._state === \"closed\"; }\n    next(value) { onNotify(this._subscription, \"next\", value); }\n    error(value) { onNotify(this._subscription, \"error\", value); }\n    complete() { onNotify(this._subscription, \"complete\"); }\n}\n/**\n * The basic Observable class. This primitive is used to wrap asynchronous\n * data streams in a common standardized data type that is interoperable\n * between libraries and can be composed to represent more complex processes.\n */\nexport class Observable {\n    constructor(subscriber) {\n        if (!(this instanceof Observable)) {\n            throw new TypeError(\"Observable cannot be called as a function\");\n        }\n        if (typeof subscriber !== \"function\") {\n            throw new TypeError(\"Observable initializer must be a function\");\n        }\n        this._subscriber = subscriber;\n    }\n    subscribe(nextOrObserver, onError, onComplete) {\n        if (typeof nextOrObserver !== \"object\" || nextOrObserver === null) {\n            nextOrObserver = {\n                next: nextOrObserver,\n                error: onError,\n                complete: onComplete\n            };\n        }\n        return new Subscription(nextOrObserver, this._subscriber);\n    }\n    pipe(first, ...mappers) {\n        // tslint:disable-next-line no-this-assignment\n        let intermediate = this;\n        for (const mapper of [first, ...mappers]) {\n            intermediate = mapper(intermediate);\n        }\n        return intermediate;\n    }\n    tap(nextOrObserver, onError, onComplete) {\n        const tapObserver = typeof nextOrObserver !== \"object\" || nextOrObserver === null\n            ? {\n                next: nextOrObserver,\n                error: onError,\n                complete: onComplete\n            }\n            : nextOrObserver;\n        return new Observable(observer => {\n            return this.subscribe({\n                next(value) {\n                    tapObserver.next && tapObserver.next(value);\n                    observer.next(value);\n                },\n                error(error) {\n                    tapObserver.error && tapObserver.error(error);\n                    observer.error(error);\n                },\n                complete() {\n                    tapObserver.complete && tapObserver.complete();\n                    observer.complete();\n                },\n                start(subscription) {\n                    tapObserver.start && tapObserver.start(subscription);\n                }\n            });\n        });\n    }\n    forEach(fn) {\n        return new Promise((resolve, reject) => {\n            if (typeof fn !== \"function\") {\n                reject(new TypeError(fn + \" is not a function\"));\n                return;\n            }\n            function done() {\n                subscription.unsubscribe();\n                resolve(undefined);\n            }\n            const subscription = this.subscribe({\n                next(value) {\n                    try {\n                        fn(value, done);\n                    }\n                    catch (e) {\n                        reject(e);\n                        subscription.unsubscribe();\n                    }\n                },\n                error(error) {\n                    reject(error);\n                },\n                complete() {\n                    resolve(undefined);\n                }\n            });\n        });\n    }\n    map(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => this.subscribe({\n            next(value) {\n                let propagatedValue = value;\n                try {\n                    propagatedValue = fn(value);\n                }\n                catch (e) {\n                    return observer.error(e);\n                }\n                observer.next(propagatedValue);\n            },\n            error(e) { observer.error(e); },\n            complete() { observer.complete(); },\n        }));\n    }\n    filter(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => this.subscribe({\n            next(value) {\n                try {\n                    if (!fn(value))\n                        return;\n                }\n                catch (e) {\n                    return observer.error(e);\n                }\n                observer.next(value);\n            },\n            error(e) { observer.error(e); },\n            complete() { observer.complete(); },\n        }));\n    }\n    reduce(fn, seed) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        const hasSeed = arguments.length > 1;\n        let hasValue = false;\n        let acc = seed;\n        return new C(observer => this.subscribe({\n            next(value) {\n                const first = !hasValue;\n                hasValue = true;\n                if (!first || hasSeed) {\n                    try {\n                        acc = fn(acc, value);\n                    }\n                    catch (e) {\n                        return observer.error(e);\n                    }\n                }\n                else {\n                    acc = value;\n                }\n            },\n            error(e) { observer.error(e); },\n            complete() {\n                if (!hasValue && !hasSeed) {\n                    return observer.error(new TypeError(\"Cannot reduce an empty sequence\"));\n                }\n                observer.next(acc);\n                observer.complete();\n            },\n        }));\n    }\n    concat(...sources) {\n        const C = getSpecies(this);\n        return new C(observer => {\n            let subscription;\n            let index = 0;\n            function startNext(next) {\n                subscription = next.subscribe({\n                    next(v) { observer.next(v); },\n                    error(e) { observer.error(e); },\n                    complete() {\n                        if (index === sources.length) {\n                            subscription = undefined;\n                            observer.complete();\n                        }\n                        else {\n                            startNext(C.from(sources[index++]));\n                        }\n                    },\n                });\n            }\n            startNext(this);\n            return () => {\n                if (subscription) {\n                    subscription.unsubscribe();\n                    subscription = undefined;\n                }\n            };\n        });\n    }\n    flatMap(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => {\n            const subscriptions = [];\n            const outer = this.subscribe({\n                next(value) {\n                    let normalizedValue;\n                    if (fn) {\n                        try {\n                            normalizedValue = fn(value);\n                        }\n                        catch (e) {\n                            return observer.error(e);\n                        }\n                    }\n                    else {\n                        normalizedValue = value;\n                    }\n                    const inner = C.from(normalizedValue).subscribe({\n                        next(innerValue) { observer.next(innerValue); },\n                        error(e) { observer.error(e); },\n                        complete() {\n                            const i = subscriptions.indexOf(inner);\n                            if (i >= 0)\n                                subscriptions.splice(i, 1);\n                            completeIfDone();\n                        },\n                    });\n                    subscriptions.push(inner);\n                },\n                error(e) { observer.error(e); },\n                complete() { completeIfDone(); },\n            });\n            function completeIfDone() {\n                if (outer.closed && subscriptions.length === 0) {\n                    observer.complete();\n                }\n            }\n            return () => {\n                subscriptions.forEach(s => s.unsubscribe());\n                outer.unsubscribe();\n            };\n        });\n    }\n    [(Symbol.observable, SymbolObservable)]() { return this; }\n    static from(x) {\n        const C = (typeof this === \"function\" ? this : Observable);\n        if (x == null) {\n            throw new TypeError(x + \" is not an object\");\n        }\n        const observableMethod = getMethod(x, SymbolObservable);\n        if (observableMethod) {\n            const observable = observableMethod.call(x);\n            if (Object(observable) !== observable) {\n                throw new TypeError(observable + \" is not an object\");\n            }\n            if (isObservable(observable) && observable.constructor === C) {\n                return observable;\n            }\n            return new C(observer => observable.subscribe(observer));\n        }\n        if (hasSymbol(\"iterator\")) {\n            const iteratorMethod = getMethod(x, SymbolIterator);\n            if (iteratorMethod) {\n                return new C(observer => {\n                    enqueue(() => {\n                        if (observer.closed)\n                            return;\n                        for (const item of iteratorMethod.call(x)) {\n                            observer.next(item);\n                            if (observer.closed)\n                                return;\n                        }\n                        observer.complete();\n                    });\n                });\n            }\n        }\n        if (Array.isArray(x)) {\n            return new C(observer => {\n                enqueue(() => {\n                    if (observer.closed)\n                        return;\n                    for (const item of x) {\n                        observer.next(item);\n                        if (observer.closed)\n                            return;\n                    }\n                    observer.complete();\n                });\n            });\n        }\n        throw new TypeError(x + \" is not observable\");\n    }\n    static of(...items) {\n        const C = (typeof this === \"function\" ? this : Observable);\n        return new C(observer => {\n            enqueue(() => {\n                if (observer.closed)\n                    return;\n                for (const item of items) {\n                    observer.next(item);\n                    if (observer.closed)\n                        return;\n                }\n                observer.complete();\n            });\n        });\n    }\n    static get [SymbolSpecies]() { return this; }\n}\nif (hasSymbols()) {\n    Object.defineProperty(Observable, Symbol(\"extensions\"), {\n        value: {\n            symbol: SymbolObservable,\n            hostReportError,\n        },\n        configurable: true,\n    });\n}\nexport default Observable;\n","/**\n * Unsubscribe from a subscription returned by something that looks like an observable,\n * but is not necessarily our observable implementation.\n */\nfunction unsubscribe(subscription) {\n    if (typeof subscription === \"function\") {\n        subscription();\n    }\n    else if (subscription && typeof subscription.unsubscribe === \"function\") {\n        subscription.unsubscribe();\n    }\n}\nexport default unsubscribe;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Filters the values emitted by another observable.\n * To be applied to an input observable using `pipe()`.\n */\nfunction filter(test) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        if (yield test(input)) {\n                            next(input);\n                        }\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default filter;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport { isAsyncIterator, isIterator } from \"./_util\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Maps the values emitted by another observable. In contrast to `map()`\n * the `mapper` function returns an array of values that will be emitted\n * separately.\n * Use `flatMap()` to map input values to zero, one or multiple output\n * values. To be applied to an input observable using `pipe()`.\n */\nfunction flatMap(mapper) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        var e_1, _a;\n                        const mapped = yield mapper(input);\n                        if (isIterator(mapped) || isAsyncIterator(mapped)) {\n                            try {\n                                for (var mapped_1 = __asyncValues(mapped), mapped_1_1; mapped_1_1 = yield mapped_1.next(), !mapped_1_1.done;) {\n                                    const element = mapped_1_1.value;\n                                    next(element);\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (mapped_1_1 && !mapped_1_1.done && (_a = mapped_1.return)) yield _a.call(mapped_1);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                        }\n                        else {\n                            mapped.map(output => next(output));\n                        }\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default flatMap;\n","/// <reference lib=\"es2018\" />\nimport { hasSymbol } from \"./_symbols\";\nexport function isAsyncIterator(thing) {\n    return thing && hasSymbol(\"asyncIterator\") && thing[Symbol.asyncIterator];\n}\nexport function isIterator(thing) {\n    return thing && hasSymbol(\"iterator\") && thing[Symbol.iterator];\n}\n","import { Observable } from \"./observable\";\n/**\n * Creates an observable that yields a new value every `period` milliseconds.\n * The first value emitted is 0, then 1, 2, etc. The first value is not emitted\n * immediately, but after the first interval.\n */\nexport default function interval(period) {\n    return new Observable(observer => {\n        let counter = 0;\n        const handle = setInterval(() => {\n            observer.next(counter++);\n        }, period);\n        return () => clearInterval(handle);\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Maps the values emitted by another observable to different values.\n * To be applied to an input observable using `pipe()`.\n */\nfunction map(mapper) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        const mapped = yield mapper(input);\n                        next(mapped);\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default map;\n","import { Observable } from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\nfunction merge(...observables) {\n    if (observables.length === 0) {\n        return Observable.from([]);\n    }\n    return new Observable(observer => {\n        let completed = 0;\n        const subscriptions = observables.map(input => {\n            return input.subscribe({\n                error(error) {\n                    observer.error(error);\n                    unsubscribeAll();\n                },\n                next(value) {\n                    observer.next(value);\n                },\n                complete() {\n                    if (++completed === observables.length) {\n                        observer.complete();\n                        unsubscribeAll();\n                    }\n                }\n            });\n        });\n        const unsubscribeAll = () => {\n            subscriptions.forEach(subscription => unsubscribe(subscription));\n        };\n        return unsubscribeAll;\n    });\n}\nexport default merge;\n","import Observable from \"./observable\";\n// TODO: This observer iteration approach looks inelegant and expensive\n// Idea: Come up with super class for Subscription that contains the\n//       notify*, ... methods and use it here\n/**\n * A subject is a \"hot\" observable (see `multicast`) that has its observer\n * methods (`.next(value)`, `.error(error)`, `.complete()`) exposed.\n *\n * Be careful, though! With great power comes great responsibility. Only use\n * the `Subject` when you really need to trigger updates \"from the outside\" and\n * try to keep the code that can access it to a minimum. Return\n * `Observable.from(mySubject)` to not allow other code to mutate.\n */\nclass MulticastSubject extends Observable {\n    constructor() {\n        super(observer => {\n            this._observers.add(observer);\n            return () => this._observers.delete(observer);\n        });\n        this._observers = new Set();\n    }\n    next(value) {\n        for (const observer of this._observers) {\n            observer.next(value);\n        }\n    }\n    error(error) {\n        for (const observer of this._observers) {\n            observer.error(error);\n        }\n    }\n    complete() {\n        for (const observer of this._observers) {\n            observer.complete();\n        }\n    }\n}\nexport default MulticastSubject;\n","import Observable from \"./observable\";\nimport Subject from \"./subject\";\nimport unsubscribe from \"./unsubscribe\";\n// TODO: Subject already creates additional observables \"under the hood\",\n//       now we introduce even more. A true native MulticastObservable\n//       would be preferable.\n/**\n * Takes a \"cold\" observable and returns a wrapping \"hot\" observable that\n * proxies the input observable's values and errors.\n *\n * An observable is called \"cold\" when its initialization function is run\n * for each new subscriber. This is how observable-fns's `Observable`\n * implementation works.\n *\n * A hot observable is an observable where new subscribers subscribe to\n * the upcoming values of an already-initialiazed observable.\n *\n * The multicast observable will lazily subscribe to the source observable\n * once it has its first own subscriber and will unsubscribe from the\n * source observable when its last own subscriber unsubscribed.\n */\nfunction multicast(coldObservable) {\n    const subject = new Subject();\n    let sourceSubscription;\n    let subscriberCount = 0;\n    return new Observable(observer => {\n        // Init source subscription lazily\n        if (!sourceSubscription) {\n            sourceSubscription = coldObservable.subscribe(subject);\n        }\n        // Pipe all events from `subject` into this observable\n        const subscription = subject.subscribe(observer);\n        subscriberCount++;\n        return () => {\n            subscriberCount--;\n            subscription.unsubscribe();\n            // Close source subscription once last subscriber has unsubscribed\n            if (subscriberCount === 0) {\n                unsubscribe(sourceSubscription);\n                sourceSubscription = undefined;\n            }\n        };\n    });\n}\nexport default multicast;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\nfunction scan(accumulator, seed) {\n    return (observable) => {\n        return new Observable(observer => {\n            let accumulated;\n            let index = 0;\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(value) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        const prevAcc = index === 0\n                            ? (typeof seed === \"undefined\" ? value : seed)\n                            : accumulated;\n                        accumulated = yield accumulator(prevAcc, value, index++);\n                        next(accumulated);\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default scan;\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serialize = exports.deserialize = exports.registerSerializer = void 0;\nconst serializers_1 = require(\"./serializers\");\nlet registeredSerializer = serializers_1.DefaultSerializer;\nfunction registerSerializer(serializer) {\n    registeredSerializer = serializers_1.extendSerializer(registeredSerializer, serializer);\n}\nexports.registerSerializer = registerSerializer;\nfunction deserialize(message) {\n    return registeredSerializer.deserialize(message);\n}\nexports.deserialize = deserialize;\nfunction serialize(input) {\n    return registeredSerializer.serialize(input);\n}\nexports.serialize = serialize;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transfer = exports.DefaultSerializer = exports.expose = exports.registerSerializer = void 0;\nvar common_1 = require(\"./common\");\nObject.defineProperty(exports, \"registerSerializer\", { enumerable: true, get: function () { return common_1.registerSerializer; } });\n__exportStar(require(\"./master/index\"), exports);\nvar index_1 = require(\"./worker/index\");\nObject.defineProperty(exports, \"expose\", { enumerable: true, get: function () { return index_1.expose; } });\nvar serializers_1 = require(\"./serializers\");\nObject.defineProperty(exports, \"DefaultSerializer\", { enumerable: true, get: function () { return serializers_1.DefaultSerializer; } });\nvar transferable_1 = require(\"./transferable\");\nObject.defineProperty(exports, \"Transfer\", { enumerable: true, get: function () { return transferable_1.Transfer; } });\n","\"use strict\";\n// Source: <https://github.com/parcel-bundler/parcel/blob/master/packages/core/parcel-bundler/src/builtins/bundle-url.js>\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBundleURL = exports.getBaseURL = void 0;\nlet bundleURL;\nfunction getBundleURLCached() {\n    if (!bundleURL) {\n        bundleURL = getBundleURL();\n    }\n    return bundleURL;\n}\nexports.getBundleURL = getBundleURLCached;\nfunction getBundleURL() {\n    // Attempt to find the URL of the current script and use that as the base URL\n    try {\n        throw new Error;\n    }\n    catch (err) {\n        const matches = (\"\" + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n        if (matches) {\n            return getBaseURL(matches[0]);\n        }\n    }\n    return \"/\";\n}\nfunction getBaseURL(url) {\n    return (\"\" + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\nexports.getBaseURL = getBaseURL;\n","\"use strict\";\n// tslint:disable max-classes-per-file\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isWorkerRuntime = exports.getWorkerImplementation = exports.defaultPoolSize = void 0;\nconst get_bundle_url_browser_1 = require(\"./get-bundle-url.browser\");\nexports.defaultPoolSize = typeof navigator !== \"undefined\" && navigator.hardwareConcurrency\n    ? navigator.hardwareConcurrency\n    : 4;\nconst isAbsoluteURL = (value) => /^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(value);\nfunction createSourceBlobURL(code) {\n    const blob = new Blob([code], { type: \"application/javascript\" });\n    return URL.createObjectURL(blob);\n}\nfunction selectWorkerImplementation() {\n    if (typeof Worker === \"undefined\") {\n        // Might happen on Safari, for instance\n        // The idea is to only fail if the constructor is actually used\n        return class NoWebWorker {\n            constructor() {\n                throw Error(\"No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.\");\n            }\n        };\n    }\n    class WebWorker extends Worker {\n        constructor(url, options) {\n            var _a, _b;\n            if (typeof url === \"string\" && options && options._baseURL) {\n                url = new URL(url, options._baseURL);\n            }\n            else if (typeof url === \"string\" && !isAbsoluteURL(url) && get_bundle_url_browser_1.getBundleURL().match(/^file:\\/\\//i)) {\n                url = new URL(url, get_bundle_url_browser_1.getBundleURL().replace(/\\/[^\\/]+$/, \"/\"));\n                if ((_a = options === null || options === void 0 ? void 0 : options.CORSWorkaround) !== null && _a !== void 0 ? _a : true) {\n                    url = createSourceBlobURL(`importScripts(${JSON.stringify(url)});`);\n                }\n            }\n            if (typeof url === \"string\" && isAbsoluteURL(url)) {\n                // Create source code blob loading JS file via `importScripts()`\n                // to circumvent worker CORS restrictions\n                if ((_b = options === null || options === void 0 ? void 0 : options.CORSWorkaround) !== null && _b !== void 0 ? _b : true) {\n                    url = createSourceBlobURL(`importScripts(${JSON.stringify(url)});`);\n                }\n            }\n            super(url, options);\n        }\n    }\n    class BlobWorker extends WebWorker {\n        constructor(blob, options) {\n            const url = window.URL.createObjectURL(blob);\n            super(url, options);\n        }\n        static fromText(source, options) {\n            const blob = new window.Blob([source], { type: \"text/javascript\" });\n            return new BlobWorker(blob, options);\n        }\n    }\n    return {\n        blob: BlobWorker,\n        default: WebWorker\n    };\n}\nlet implementation;\nfunction getWorkerImplementation() {\n    if (!implementation) {\n        implementation = selectWorkerImplementation();\n    }\n    return implementation;\n}\nexports.getWorkerImplementation = getWorkerImplementation;\nfunction isWorkerRuntime() {\n    const isWindowContext = typeof self !== \"undefined\" && typeof Window !== \"undefined\" && self instanceof Window;\n    return typeof self !== \"undefined\" && self.postMessage && !isWindowContext ? true : false;\n}\nexports.isWorkerRuntime = isWorkerRuntime;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Worker = exports.BlobWorker = exports.isWorkerRuntime = exports.Thread = exports.spawn = exports.Pool = void 0;\nconst implementation_1 = require(\"./implementation\");\nObject.defineProperty(exports, \"isWorkerRuntime\", { enumerable: true, get: function () { return implementation_1.isWorkerRuntime; } });\nvar pool_1 = require(\"./pool\");\nObject.defineProperty(exports, \"Pool\", { enumerable: true, get: function () { return pool_1.Pool; } });\nvar spawn_1 = require(\"./spawn\");\nObject.defineProperty(exports, \"spawn\", { enumerable: true, get: function () { return spawn_1.spawn; } });\nvar thread_1 = require(\"./thread\");\nObject.defineProperty(exports, \"Thread\", { enumerable: true, get: function () { return thread_1.Thread; } });\n/** Separate class to spawn workers from source code blobs or strings. */\nexports.BlobWorker = implementation_1.getWorkerImplementation().blob;\n/** Worker implementation. Either web worker or a node.js Worker class. */\nexports.Worker = implementation_1.getWorkerImplementation().default;\n","\"use strict\";\n/*\n * This source file contains the code for proxying calls in the master thread to calls in the workers\n * by `.postMessage()`-ing.\n *\n * Keep in mind that this code can make or break the program's performance! Need to optimize more\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProxyModule = exports.createProxyFunction = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst common_1 = require(\"../common\");\nconst observable_promise_1 = require(\"../observable-promise\");\nconst transferable_1 = require(\"../transferable\");\nconst messages_1 = require(\"../types/messages\");\nconst debugMessages = debug_1.default(\"threads:master:messages\");\nlet nextJobUID = 1;\nconst dedupe = (array) => Array.from(new Set(array));\nconst isJobErrorMessage = (data) => data && data.type === messages_1.WorkerMessageType.error;\nconst isJobResultMessage = (data) => data && data.type === messages_1.WorkerMessageType.result;\nconst isJobStartMessage = (data) => data && data.type === messages_1.WorkerMessageType.running;\nfunction createObservableForJob(worker, jobUID) {\n    return new observable_fns_1.Observable(observer => {\n        let asyncType;\n        const messageHandler = ((event) => {\n            debugMessages(\"Message from worker:\", event.data);\n            if (!event.data || event.data.uid !== jobUID)\n                return;\n            if (isJobStartMessage(event.data)) {\n                asyncType = event.data.resultType;\n            }\n            else if (isJobResultMessage(event.data)) {\n                if (asyncType === \"promise\") {\n                    if (typeof event.data.payload !== \"undefined\") {\n                        observer.next(common_1.deserialize(event.data.payload));\n                    }\n                    observer.complete();\n                    worker.removeEventListener(\"message\", messageHandler);\n                }\n                else {\n                    if (event.data.payload) {\n                        observer.next(common_1.deserialize(event.data.payload));\n                    }\n                    if (event.data.complete) {\n                        observer.complete();\n                        worker.removeEventListener(\"message\", messageHandler);\n                    }\n                }\n            }\n            else if (isJobErrorMessage(event.data)) {\n                const error = common_1.deserialize(event.data.error);\n                if (asyncType === \"promise\" || !asyncType) {\n                    observer.error(error);\n                }\n                else {\n                    observer.error(error);\n                }\n                worker.removeEventListener(\"message\", messageHandler);\n            }\n        });\n        worker.addEventListener(\"message\", messageHandler);\n        return () => {\n            if (asyncType === \"observable\" || !asyncType) {\n                const cancelMessage = {\n                    type: messages_1.MasterMessageType.cancel,\n                    uid: jobUID\n                };\n                worker.postMessage(cancelMessage);\n            }\n            worker.removeEventListener(\"message\", messageHandler);\n        };\n    });\n}\nfunction prepareArguments(rawArgs) {\n    if (rawArgs.length === 0) {\n        // Exit early if possible\n        return {\n            args: [],\n            transferables: []\n        };\n    }\n    const args = [];\n    const transferables = [];\n    for (const arg of rawArgs) {\n        if (transferable_1.isTransferDescriptor(arg)) {\n            args.push(common_1.serialize(arg.send));\n            transferables.push(...arg.transferables);\n        }\n        else {\n            args.push(common_1.serialize(arg));\n        }\n    }\n    return {\n        args,\n        transferables: transferables.length === 0 ? transferables : dedupe(transferables)\n    };\n}\nfunction createProxyFunction(worker, method) {\n    return ((...rawArgs) => {\n        const uid = nextJobUID++;\n        const { args, transferables } = prepareArguments(rawArgs);\n        const runMessage = {\n            type: messages_1.MasterMessageType.run,\n            uid,\n            method,\n            args\n        };\n        debugMessages(\"Sending command to run function to worker:\", runMessage);\n        try {\n            worker.postMessage(runMessage, transferables);\n        }\n        catch (error) {\n            return observable_promise_1.ObservablePromise.from(Promise.reject(error));\n        }\n        return observable_promise_1.ObservablePromise.from(observable_fns_1.multicast(createObservableForJob(worker, uid)));\n    });\n}\nexports.createProxyFunction = createProxyFunction;\nfunction createProxyModule(worker, methodNames) {\n    const proxy = {};\n    for (const methodName of methodNames) {\n        proxy[methodName] = createProxyFunction(worker, methodName);\n    }\n    return proxy;\n}\nexports.createProxyModule = createProxyModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PoolEventType = void 0;\n/** Pool event type. Specifies the type of each `PoolEvent`. */\nvar PoolEventType;\n(function (PoolEventType) {\n    PoolEventType[\"initialized\"] = \"initialized\";\n    PoolEventType[\"taskCanceled\"] = \"taskCanceled\";\n    PoolEventType[\"taskCompleted\"] = \"taskCompleted\";\n    PoolEventType[\"taskFailed\"] = \"taskFailed\";\n    PoolEventType[\"taskQueued\"] = \"taskQueued\";\n    PoolEventType[\"taskQueueDrained\"] = \"taskQueueDrained\";\n    PoolEventType[\"taskStart\"] = \"taskStart\";\n    PoolEventType[\"terminated\"] = \"terminated\";\n})(PoolEventType = exports.PoolEventType || (exports.PoolEventType = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Pool = exports.Thread = exports.PoolEventType = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst ponyfills_1 = require(\"../ponyfills\");\nconst implementation_1 = require(\"./implementation\");\nconst pool_types_1 = require(\"./pool-types\");\nObject.defineProperty(exports, \"PoolEventType\", { enumerable: true, get: function () { return pool_types_1.PoolEventType; } });\nconst thread_1 = require(\"./thread\");\nObject.defineProperty(exports, \"Thread\", { enumerable: true, get: function () { return thread_1.Thread; } });\nlet nextPoolID = 1;\nfunction createArray(size) {\n    const array = [];\n    for (let index = 0; index < size; index++) {\n        array.push(index);\n    }\n    return array;\n}\nfunction delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nfunction flatMap(array, mapper) {\n    return array.reduce((flattened, element) => [...flattened, ...mapper(element)], []);\n}\nfunction slugify(text) {\n    return text.replace(/\\W/g, \" \").trim().replace(/\\s+/g, \"-\");\n}\nfunction spawnWorkers(spawnWorker, count) {\n    return createArray(count).map(() => ({\n        init: spawnWorker(),\n        runningTasks: []\n    }));\n}\nclass WorkerPool {\n    constructor(spawnWorker, optionsOrSize) {\n        this.eventSubject = new observable_fns_1.Subject();\n        this.initErrors = [];\n        this.isClosing = false;\n        this.nextTaskID = 1;\n        this.taskQueue = [];\n        const options = typeof optionsOrSize === \"number\"\n            ? { size: optionsOrSize }\n            : optionsOrSize || {};\n        const { size = implementation_1.defaultPoolSize } = options;\n        this.debug = debug_1.default(`threads:pool:${slugify(options.name || String(nextPoolID++))}`);\n        this.options = options;\n        this.workers = spawnWorkers(spawnWorker, size);\n        this.eventObservable = observable_fns_1.multicast(observable_fns_1.Observable.from(this.eventSubject));\n        Promise.all(this.workers.map(worker => worker.init)).then(() => this.eventSubject.next({\n            type: pool_types_1.PoolEventType.initialized,\n            size: this.workers.length\n        }), error => {\n            this.debug(\"Error while initializing pool worker:\", error);\n            this.eventSubject.error(error);\n            this.initErrors.push(error);\n        });\n    }\n    findIdlingWorker() {\n        const { concurrency = 1 } = this.options;\n        return this.workers.find(worker => worker.runningTasks.length < concurrency);\n    }\n    runPoolTask(worker, task) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const workerID = this.workers.indexOf(worker) + 1;\n            this.debug(`Running task #${task.id} on worker #${workerID}...`);\n            this.eventSubject.next({\n                type: pool_types_1.PoolEventType.taskStart,\n                taskID: task.id,\n                workerID\n            });\n            try {\n                const returnValue = yield task.run(yield worker.init);\n                this.debug(`Task #${task.id} completed successfully`);\n                this.eventSubject.next({\n                    type: pool_types_1.PoolEventType.taskCompleted,\n                    returnValue,\n                    taskID: task.id,\n                    workerID\n                });\n            }\n            catch (error) {\n                this.debug(`Task #${task.id} failed`);\n                this.eventSubject.next({\n                    type: pool_types_1.PoolEventType.taskFailed,\n                    taskID: task.id,\n                    error,\n                    workerID\n                });\n            }\n        });\n    }\n    run(worker, task) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const runPromise = (() => __awaiter(this, void 0, void 0, function* () {\n                const removeTaskFromWorkersRunningTasks = () => {\n                    worker.runningTasks = worker.runningTasks.filter(someRunPromise => someRunPromise !== runPromise);\n                };\n                // Defer task execution by one tick to give handlers time to subscribe\n                yield delay(0);\n                try {\n                    yield this.runPoolTask(worker, task);\n                }\n                finally {\n                    removeTaskFromWorkersRunningTasks();\n                    if (!this.isClosing) {\n                        this.scheduleWork();\n                    }\n                }\n            }))();\n            worker.runningTasks.push(runPromise);\n        });\n    }\n    scheduleWork() {\n        this.debug(`Attempt de-queueing a task in order to run it...`);\n        const availableWorker = this.findIdlingWorker();\n        if (!availableWorker)\n            return;\n        const nextTask = this.taskQueue.shift();\n        if (!nextTask) {\n            this.debug(`Task queue is empty`);\n            this.eventSubject.next({ type: pool_types_1.PoolEventType.taskQueueDrained });\n            return;\n        }\n        this.run(availableWorker, nextTask);\n    }\n    taskCompletion(taskID) {\n        return new Promise((resolve, reject) => {\n            const eventSubscription = this.events().subscribe(event => {\n                if (event.type === pool_types_1.PoolEventType.taskCompleted && event.taskID === taskID) {\n                    eventSubscription.unsubscribe();\n                    resolve(event.returnValue);\n                }\n                else if (event.type === pool_types_1.PoolEventType.taskFailed && event.taskID === taskID) {\n                    eventSubscription.unsubscribe();\n                    reject(event.error);\n                }\n                else if (event.type === pool_types_1.PoolEventType.terminated) {\n                    eventSubscription.unsubscribe();\n                    reject(Error(\"Pool has been terminated before task was run.\"));\n                }\n            });\n        });\n    }\n    settled(allowResolvingImmediately = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const getCurrentlyRunningTasks = () => flatMap(this.workers, worker => worker.runningTasks);\n            const taskFailures = [];\n            const failureSubscription = this.eventObservable.subscribe(event => {\n                if (event.type === pool_types_1.PoolEventType.taskFailed) {\n                    taskFailures.push(event.error);\n                }\n            });\n            if (this.initErrors.length > 0) {\n                return Promise.reject(this.initErrors[0]);\n            }\n            if (allowResolvingImmediately && this.taskQueue.length === 0) {\n                yield ponyfills_1.allSettled(getCurrentlyRunningTasks());\n                return taskFailures;\n            }\n            yield new Promise((resolve, reject) => {\n                const subscription = this.eventObservable.subscribe({\n                    next(event) {\n                        if (event.type === pool_types_1.PoolEventType.taskQueueDrained) {\n                            subscription.unsubscribe();\n                            resolve(void 0);\n                        }\n                    },\n                    error: reject // make a pool-wide error reject the completed() result promise\n                });\n            });\n            yield ponyfills_1.allSettled(getCurrentlyRunningTasks());\n            failureSubscription.unsubscribe();\n            return taskFailures;\n        });\n    }\n    completed(allowResolvingImmediately = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const settlementPromise = this.settled(allowResolvingImmediately);\n            const earlyExitPromise = new Promise((resolve, reject) => {\n                const subscription = this.eventObservable.subscribe({\n                    next(event) {\n                        if (event.type === pool_types_1.PoolEventType.taskQueueDrained) {\n                            subscription.unsubscribe();\n                            resolve(settlementPromise);\n                        }\n                        else if (event.type === pool_types_1.PoolEventType.taskFailed) {\n                            subscription.unsubscribe();\n                            reject(event.error);\n                        }\n                    },\n                    error: reject // make a pool-wide error reject the completed() result promise\n                });\n            });\n            const errors = yield Promise.race([\n                settlementPromise,\n                earlyExitPromise\n            ]);\n            if (errors.length > 0) {\n                throw errors[0];\n            }\n        });\n    }\n    events() {\n        return this.eventObservable;\n    }\n    queue(taskFunction) {\n        const { maxQueuedJobs = Infinity } = this.options;\n        if (this.isClosing) {\n            throw Error(`Cannot schedule pool tasks after terminate() has been called.`);\n        }\n        if (this.initErrors.length > 0) {\n            throw this.initErrors[0];\n        }\n        const taskID = this.nextTaskID++;\n        const taskCompletion = this.taskCompletion(taskID);\n        taskCompletion.catch((error) => {\n            // Prevent unhandled rejections here as we assume the user will use\n            // `pool.completed()`, `pool.settled()` or `task.catch()` to handle errors\n            this.debug(`Task #${taskID} errored:`, error);\n        });\n        const task = {\n            id: taskID,\n            run: taskFunction,\n            cancel: () => {\n                if (this.taskQueue.indexOf(task) === -1)\n                    return;\n                this.taskQueue = this.taskQueue.filter(someTask => someTask !== task);\n                this.eventSubject.next({\n                    type: pool_types_1.PoolEventType.taskCanceled,\n                    taskID: task.id\n                });\n            },\n            then: taskCompletion.then.bind(taskCompletion)\n        };\n        if (this.taskQueue.length >= maxQueuedJobs) {\n            throw Error(\"Maximum number of pool tasks queued. Refusing to queue another one.\\n\" +\n                \"This usually happens for one of two reasons: We are either at peak \" +\n                \"workload right now or some tasks just won't finish, thus blocking the pool.\");\n        }\n        this.debug(`Queueing task #${task.id}...`);\n        this.taskQueue.push(task);\n        this.eventSubject.next({\n            type: pool_types_1.PoolEventType.taskQueued,\n            taskID: task.id\n        });\n        this.scheduleWork();\n        return task;\n    }\n    terminate(force) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.isClosing = true;\n            if (!force) {\n                yield this.completed(true);\n            }\n            this.eventSubject.next({\n                type: pool_types_1.PoolEventType.terminated,\n                remainingQueue: [...this.taskQueue]\n            });\n            this.eventSubject.complete();\n            yield Promise.all(this.workers.map((worker) => __awaiter(this, void 0, void 0, function* () { return thread_1.Thread.terminate(yield worker.init); })));\n        });\n    }\n}\nWorkerPool.EventType = pool_types_1.PoolEventType;\n/**\n * Thread pool constructor. Creates a new pool and spawns its worker threads.\n */\nfunction PoolConstructor(spawnWorker, optionsOrSize) {\n    // The function exists only so we don't need to use `new` to create a pool (we still can, though).\n    // If the Pool is a class or not is an implementation detail that should not concern the user.\n    return new WorkerPool(spawnWorker, optionsOrSize);\n}\nPoolConstructor.EventType = pool_types_1.PoolEventType;\n/**\n * Thread pool constructor. Creates a new pool and spawns its worker threads.\n */\nexports.Pool = PoolConstructor;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.spawn = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst common_1 = require(\"../common\");\nconst promise_1 = require(\"../promise\");\nconst symbols_1 = require(\"../symbols\");\nconst master_1 = require(\"../types/master\");\nconst invocation_proxy_1 = require(\"./invocation-proxy\");\nconst debugMessages = debug_1.default(\"threads:master:messages\");\nconst debugSpawn = debug_1.default(\"threads:master:spawn\");\nconst debugThreadUtils = debug_1.default(\"threads:master:thread-utils\");\nconst isInitMessage = (data) => data && data.type === \"init\";\nconst isUncaughtErrorMessage = (data) => data && data.type === \"uncaughtError\";\nconst initMessageTimeout = typeof process !== \"undefined\" && process.env.THREADS_WORKER_INIT_TIMEOUT\n    ? Number.parseInt(process.env.THREADS_WORKER_INIT_TIMEOUT, 10)\n    : 10000;\nfunction withTimeout(promise, timeoutInMs, errorMessage) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let timeoutHandle;\n        const timeout = new Promise((resolve, reject) => {\n            timeoutHandle = setTimeout(() => reject(Error(errorMessage)), timeoutInMs);\n        });\n        const result = yield Promise.race([\n            promise,\n            timeout\n        ]);\n        clearTimeout(timeoutHandle);\n        return result;\n    });\n}\nfunction receiveInitMessage(worker) {\n    return new Promise((resolve, reject) => {\n        const messageHandler = ((event) => {\n            debugMessages(\"Message from worker before finishing initialization:\", event.data);\n            if (isInitMessage(event.data)) {\n                worker.removeEventListener(\"message\", messageHandler);\n                resolve(event.data);\n            }\n            else if (isUncaughtErrorMessage(event.data)) {\n                worker.removeEventListener(\"message\", messageHandler);\n                reject(common_1.deserialize(event.data.error));\n            }\n        });\n        worker.addEventListener(\"message\", messageHandler);\n    });\n}\nfunction createEventObservable(worker, workerTermination) {\n    return new observable_fns_1.Observable(observer => {\n        const messageHandler = ((messageEvent) => {\n            const workerEvent = {\n                type: master_1.WorkerEventType.message,\n                data: messageEvent.data\n            };\n            observer.next(workerEvent);\n        });\n        const rejectionHandler = ((errorEvent) => {\n            debugThreadUtils(\"Unhandled promise rejection event in thread:\", errorEvent);\n            const workerEvent = {\n                type: master_1.WorkerEventType.internalError,\n                error: Error(errorEvent.reason)\n            };\n            observer.next(workerEvent);\n        });\n        worker.addEventListener(\"message\", messageHandler);\n        worker.addEventListener(\"unhandledrejection\", rejectionHandler);\n        workerTermination.then(() => {\n            const terminationEvent = {\n                type: master_1.WorkerEventType.termination\n            };\n            worker.removeEventListener(\"message\", messageHandler);\n            worker.removeEventListener(\"unhandledrejection\", rejectionHandler);\n            observer.next(terminationEvent);\n            observer.complete();\n        });\n    });\n}\nfunction createTerminator(worker) {\n    const [termination, resolver] = promise_1.createPromiseWithResolver();\n    const terminate = () => __awaiter(this, void 0, void 0, function* () {\n        debugThreadUtils(\"Terminating worker\");\n        // Newer versions of worker_threads workers return a promise\n        yield worker.terminate();\n        resolver();\n    });\n    return { terminate, termination };\n}\nfunction setPrivateThreadProps(raw, worker, workerEvents, terminate) {\n    const workerErrors = workerEvents\n        .filter(event => event.type === master_1.WorkerEventType.internalError)\n        .map(errorEvent => errorEvent.error);\n    // tslint:disable-next-line prefer-object-spread\n    return Object.assign(raw, {\n        [symbols_1.$errors]: workerErrors,\n        [symbols_1.$events]: workerEvents,\n        [symbols_1.$terminate]: terminate,\n        [symbols_1.$worker]: worker\n    });\n}\n/**\n * Spawn a new thread. Takes a fresh worker instance, wraps it in a thin\n * abstraction layer to provide the transparent API and verifies that\n * the worker has initialized successfully.\n *\n * @param worker Instance of `Worker`. Either a web worker, `worker_threads` worker or `tiny-worker` worker.\n * @param [options]\n * @param [options.timeout] Init message timeout. Default: 10000 or set by environment variable.\n */\nfunction spawn(worker, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        debugSpawn(\"Initializing new thread\");\n        const timeout = options && options.timeout ? options.timeout : initMessageTimeout;\n        const initMessage = yield withTimeout(receiveInitMessage(worker), timeout, `Timeout: Did not receive an init message from worker after ${timeout}ms. Make sure the worker calls expose().`);\n        const exposed = initMessage.exposed;\n        const { termination, terminate } = createTerminator(worker);\n        const events = createEventObservable(worker, termination);\n        if (exposed.type === \"function\") {\n            const proxy = invocation_proxy_1.createProxyFunction(worker);\n            return setPrivateThreadProps(proxy, worker, events, terminate);\n        }\n        else if (exposed.type === \"module\") {\n            const proxy = invocation_proxy_1.createProxyModule(worker, exposed.methods);\n            return setPrivateThreadProps(proxy, worker, events, terminate);\n        }\n        else {\n            const type = exposed.type;\n            throw Error(`Worker init message states unexpected type of expose(): ${type}`);\n        }\n    });\n}\nexports.spawn = spawn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Thread = void 0;\nconst symbols_1 = require(\"../symbols\");\nfunction fail(message) {\n    throw Error(message);\n}\n/** Thread utility functions. Use them to manage or inspect a `spawn()`-ed thread. */\nexports.Thread = {\n    /** Return an observable that can be used to subscribe to all errors happening in the thread. */\n    errors(thread) {\n        return thread[symbols_1.$errors] || fail(\"Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\");\n    },\n    /** Return an observable that can be used to subscribe to internal events happening in the thread. Useful for debugging. */\n    events(thread) {\n        return thread[symbols_1.$events] || fail(\"Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\");\n    },\n    /** Terminate a thread. Remember to terminate every thread when you are done using it. */\n    terminate(thread) {\n        return thread[symbols_1.$terminate]();\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObservablePromise = void 0;\nconst observable_fns_1 = require(\"observable-fns\");\nconst doNothing = () => undefined;\nconst returnInput = (input) => input;\nconst runDeferred = (fn) => Promise.resolve().then(fn);\nfunction fail(error) {\n    throw error;\n}\nfunction isThenable(thing) {\n    return thing && typeof thing.then === \"function\";\n}\n/**\n * Creates a hybrid, combining the APIs of an Observable and a Promise.\n *\n * It is used to proxy async process states when we are initially not sure\n * if that async process will yield values once (-> Promise) or multiple\n * times (-> Observable).\n *\n * Note that the observable promise inherits some of the observable's characteristics:\n * The `init` function will be called *once for every time anyone subscribes to it*.\n *\n * If this is undesired, derive a hot observable from it using `makeHot()` and\n * subscribe to that.\n */\nclass ObservablePromise extends observable_fns_1.Observable {\n    constructor(init) {\n        super((originalObserver) => {\n            // tslint:disable-next-line no-this-assignment\n            const self = this;\n            const observer = Object.assign(Object.assign({}, originalObserver), { complete() {\n                    originalObserver.complete();\n                    self.onCompletion();\n                }, error(error) {\n                    originalObserver.error(error);\n                    self.onError(error);\n                },\n                next(value) {\n                    originalObserver.next(value);\n                    self.onNext(value);\n                } });\n            try {\n                this.initHasRun = true;\n                return init(observer);\n            }\n            catch (error) {\n                observer.error(error);\n            }\n        });\n        this.initHasRun = false;\n        this.fulfillmentCallbacks = [];\n        this.rejectionCallbacks = [];\n        this.firstValueSet = false;\n        this.state = \"pending\";\n    }\n    onNext(value) {\n        if (!this.firstValueSet) {\n            this.firstValue = value;\n            this.firstValueSet = true;\n        }\n    }\n    onError(error) {\n        this.state = \"rejected\";\n        this.rejection = error;\n        for (const onRejected of this.rejectionCallbacks) {\n            // Promisifying the call to turn errors into unhandled promise rejections\n            // instead of them failing sync and cancelling the iteration\n            runDeferred(() => onRejected(error));\n        }\n    }\n    onCompletion() {\n        this.state = \"fulfilled\";\n        for (const onFulfilled of this.fulfillmentCallbacks) {\n            // Promisifying the call to turn errors into unhandled promise rejections\n            // instead of them failing sync and cancelling the iteration\n            runDeferred(() => onFulfilled(this.firstValue));\n        }\n    }\n    then(onFulfilledRaw, onRejectedRaw) {\n        const onFulfilled = onFulfilledRaw || returnInput;\n        const onRejected = onRejectedRaw || fail;\n        let onRejectedCalled = false;\n        return new Promise((resolve, reject) => {\n            const rejectionCallback = (error) => {\n                if (onRejectedCalled)\n                    return;\n                onRejectedCalled = true;\n                try {\n                    resolve(onRejected(error));\n                }\n                catch (anotherError) {\n                    reject(anotherError);\n                }\n            };\n            const fulfillmentCallback = (value) => {\n                try {\n                    resolve(onFulfilled(value));\n                }\n                catch (error) {\n                    rejectionCallback(error);\n                }\n            };\n            if (!this.initHasRun) {\n                this.subscribe({ error: rejectionCallback });\n            }\n            if (this.state === \"fulfilled\") {\n                return resolve(onFulfilled(this.firstValue));\n            }\n            if (this.state === \"rejected\") {\n                onRejectedCalled = true;\n                return resolve(onRejected(this.rejection));\n            }\n            this.fulfillmentCallbacks.push(fulfillmentCallback);\n            this.rejectionCallbacks.push(rejectionCallback);\n        });\n    }\n    catch(onRejected) {\n        return this.then(undefined, onRejected);\n    }\n    finally(onCompleted) {\n        const handler = onCompleted || doNothing;\n        return this.then((value) => {\n            handler();\n            return value;\n        }, () => handler());\n    }\n    static from(thing) {\n        if (isThenable(thing)) {\n            return new ObservablePromise(observer => {\n                const onFulfilled = (value) => {\n                    observer.next(value);\n                    observer.complete();\n                };\n                const onRejected = (error) => {\n                    observer.error(error);\n                };\n                thing.then(onFulfilled, onRejected);\n            });\n        }\n        else {\n            return super.from(thing);\n        }\n    }\n}\nexports.ObservablePromise = ObservablePromise;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Subject = exports.Observable = void 0;\nconst observable_fns_1 = require(\"observable-fns\");\nObject.defineProperty(exports, \"Observable\", { enumerable: true, get: function () { return observable_fns_1.Observable; } });\nconst $observers = Symbol(\"observers\");\n/**\n * Observable subject. Implements the Observable interface, but also exposes\n * the `next()`, `error()`, `complete()` methods to initiate observable\n * updates \"from the outside\".\n *\n * Use `Observable.from(subject)` to derive an observable that proxies all\n * values, errors and the completion raised on this subject, but does not\n * expose the `next()`, `error()`, `complete()` methods.\n */\nclass Subject extends observable_fns_1.Observable {\n    constructor() {\n        super(observer => {\n            this[$observers] = [\n                ...(this[$observers] || []),\n                observer\n            ];\n            const unsubscribe = () => {\n                this[$observers] = this[$observers].filter(someObserver => someObserver !== observer);\n            };\n            return unsubscribe;\n        });\n        this[$observers] = [];\n    }\n    complete() {\n        this[$observers].forEach(observer => observer.complete());\n    }\n    error(error) {\n        this[$observers].forEach(observer => observer.error(error));\n    }\n    next(value) {\n        this[$observers].forEach(observer => observer.next(value));\n    }\n}\nexports.Subject = Subject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.allSettled = void 0;\n// Based on <https://github.com/es-shims/Promise.allSettled/blob/master/implementation.js>\nfunction allSettled(values) {\n    return Promise.all(values.map(item => {\n        const onFulfill = (value) => {\n            return { status: 'fulfilled', value };\n        };\n        const onReject = (reason) => {\n            return { status: 'rejected', reason };\n        };\n        const itemPromise = Promise.resolve(item);\n        try {\n            return itemPromise.then(onFulfill, onReject);\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }));\n}\nexports.allSettled = allSettled;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createPromiseWithResolver = void 0;\nconst doNothing = () => undefined;\n/**\n * Creates a new promise and exposes its resolver function.\n * Use with care!\n */\nfunction createPromiseWithResolver() {\n    let alreadyResolved = false;\n    let resolvedTo;\n    let resolver = doNothing;\n    const promise = new Promise(resolve => {\n        if (alreadyResolved) {\n            resolve(resolvedTo);\n        }\n        else {\n            resolver = resolve;\n        }\n    });\n    const exposedResolver = (value) => {\n        alreadyResolved = true;\n        resolvedTo = value;\n        resolver(resolvedTo);\n    };\n    return [promise, exposedResolver];\n}\nexports.createPromiseWithResolver = createPromiseWithResolver;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultSerializer = exports.extendSerializer = void 0;\nfunction extendSerializer(extend, implementation) {\n    const fallbackDeserializer = extend.deserialize.bind(extend);\n    const fallbackSerializer = extend.serialize.bind(extend);\n    return {\n        deserialize(message) {\n            return implementation.deserialize(message, fallbackDeserializer);\n        },\n        serialize(input) {\n            return implementation.serialize(input, fallbackSerializer);\n        }\n    };\n}\nexports.extendSerializer = extendSerializer;\nconst DefaultErrorSerializer = {\n    deserialize(message) {\n        return Object.assign(Error(message.message), {\n            name: message.name,\n            stack: message.stack\n        });\n    },\n    serialize(error) {\n        return {\n            __error_marker: \"$$error\",\n            message: error.message,\n            name: error.name,\n            stack: error.stack\n        };\n    }\n};\nconst isSerializedError = (thing) => thing && typeof thing === \"object\" && \"__error_marker\" in thing && thing.__error_marker === \"$$error\";\nexports.DefaultSerializer = {\n    deserialize(message) {\n        if (isSerializedError(message)) {\n            return DefaultErrorSerializer.deserialize(message);\n        }\n        else {\n            return message;\n        }\n    },\n    serialize(input) {\n        if (input instanceof Error) {\n            return DefaultErrorSerializer.serialize(input);\n        }\n        else {\n            return input;\n        }\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$worker = exports.$transferable = exports.$terminate = exports.$events = exports.$errors = void 0;\nexports.$errors = Symbol(\"thread.errors\");\nexports.$events = Symbol(\"thread.events\");\nexports.$terminate = Symbol(\"thread.terminate\");\nexports.$transferable = Symbol(\"thread.transferable\");\nexports.$worker = Symbol(\"thread.worker\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transfer = exports.isTransferDescriptor = void 0;\nconst symbols_1 = require(\"./symbols\");\nfunction isTransferable(thing) {\n    if (!thing || typeof thing !== \"object\")\n        return false;\n    // Don't check too thoroughly, since the list of transferable things in JS might grow over time\n    return true;\n}\nfunction isTransferDescriptor(thing) {\n    return thing && typeof thing === \"object\" && thing[symbols_1.$transferable];\n}\nexports.isTransferDescriptor = isTransferDescriptor;\nfunction Transfer(payload, transferables) {\n    if (!transferables) {\n        if (!isTransferable(payload))\n            throw Error();\n        transferables = [payload];\n    }\n    return {\n        [symbols_1.$transferable]: true,\n        send: payload,\n        transferables\n    };\n}\nexports.Transfer = Transfer;\n","\"use strict\";\n/// <reference lib=\"dom\" />\n// tslint:disable max-classes-per-file\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkerEventType = void 0;\nconst symbols_1 = require(\"../symbols\");\n/** Event as emitted by worker thread. Subscribe to using `Thread.events(thread)`. */\nvar WorkerEventType;\n(function (WorkerEventType) {\n    WorkerEventType[\"internalError\"] = \"internalError\";\n    WorkerEventType[\"message\"] = \"message\";\n    WorkerEventType[\"termination\"] = \"termination\";\n})(WorkerEventType = exports.WorkerEventType || (exports.WorkerEventType = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkerMessageType = exports.MasterMessageType = void 0;\n/////////////////////////////\n// Messages sent by master:\nvar MasterMessageType;\n(function (MasterMessageType) {\n    MasterMessageType[\"cancel\"] = \"cancel\";\n    MasterMessageType[\"run\"] = \"run\";\n})(MasterMessageType = exports.MasterMessageType || (exports.MasterMessageType = {}));\n////////////////////////////\n// Messages sent by worker:\nvar WorkerMessageType;\n(function (WorkerMessageType) {\n    WorkerMessageType[\"error\"] = \"error\";\n    WorkerMessageType[\"init\"] = \"init\";\n    WorkerMessageType[\"result\"] = \"result\";\n    WorkerMessageType[\"running\"] = \"running\";\n    WorkerMessageType[\"uncaughtError\"] = \"uncaughtError\";\n})(WorkerMessageType = exports.WorkerMessageType || (exports.WorkerMessageType = {}));\n","\"use strict\";\n/// <reference lib=\"dom\" />\n// tslint:disable no-shadowed-variable\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst isWorkerRuntime = function isWorkerRuntime() {\n    const isWindowContext = typeof self !== \"undefined\" && typeof Window !== \"undefined\" && self instanceof Window;\n    return typeof self !== \"undefined\" && self.postMessage && !isWindowContext ? true : false;\n};\nconst postMessageToMaster = function postMessageToMaster(data, transferList) {\n    self.postMessage(data, transferList);\n};\nconst subscribeToMasterMessages = function subscribeToMasterMessages(onMessage) {\n    const messageHandler = (messageEvent) => {\n        onMessage(messageEvent.data);\n    };\n    const unsubscribe = () => {\n        self.removeEventListener(\"message\", messageHandler);\n    };\n    self.addEventListener(\"message\", messageHandler);\n    return unsubscribe;\n};\nexports.default = {\n    isWorkerRuntime,\n    postMessageToMaster,\n    subscribeToMasterMessages\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expose = exports.isWorkerRuntime = exports.Transfer = exports.registerSerializer = void 0;\nconst is_observable_1 = __importDefault(require(\"is-observable\"));\nconst common_1 = require(\"../common\");\nconst transferable_1 = require(\"../transferable\");\nconst messages_1 = require(\"../types/messages\");\nconst implementation_1 = __importDefault(require(\"./implementation\"));\nvar common_2 = require(\"../common\");\nObject.defineProperty(exports, \"registerSerializer\", { enumerable: true, get: function () { return common_2.registerSerializer; } });\nvar transferable_2 = require(\"../transferable\");\nObject.defineProperty(exports, \"Transfer\", { enumerable: true, get: function () { return transferable_2.Transfer; } });\n/** Returns `true` if this code is currently running in a worker. */\nexports.isWorkerRuntime = implementation_1.default.isWorkerRuntime;\nlet exposeCalled = false;\nconst activeSubscriptions = new Map();\nconst isMasterJobCancelMessage = (thing) => thing && thing.type === messages_1.MasterMessageType.cancel;\nconst isMasterJobRunMessage = (thing) => thing && thing.type === messages_1.MasterMessageType.run;\n/**\n * There are issues with `is-observable` not recognizing zen-observable's instances.\n * We are using `observable-fns`, but it's based on zen-observable, too.\n */\nconst isObservable = (thing) => is_observable_1.default(thing) || isZenObservable(thing);\nfunction isZenObservable(thing) {\n    return thing && typeof thing === \"object\" && typeof thing.subscribe === \"function\";\n}\nfunction deconstructTransfer(thing) {\n    return transferable_1.isTransferDescriptor(thing)\n        ? { payload: thing.send, transferables: thing.transferables }\n        : { payload: thing, transferables: undefined };\n}\nfunction postFunctionInitMessage() {\n    const initMessage = {\n        type: messages_1.WorkerMessageType.init,\n        exposed: {\n            type: \"function\"\n        }\n    };\n    implementation_1.default.postMessageToMaster(initMessage);\n}\nfunction postModuleInitMessage(methodNames) {\n    const initMessage = {\n        type: messages_1.WorkerMessageType.init,\n        exposed: {\n            type: \"module\",\n            methods: methodNames\n        }\n    };\n    implementation_1.default.postMessageToMaster(initMessage);\n}\nfunction postJobErrorMessage(uid, rawError) {\n    const { payload: error, transferables } = deconstructTransfer(rawError);\n    const errorMessage = {\n        type: messages_1.WorkerMessageType.error,\n        uid,\n        error: common_1.serialize(error)\n    };\n    implementation_1.default.postMessageToMaster(errorMessage, transferables);\n}\nfunction postJobResultMessage(uid, completed, resultValue) {\n    const { payload, transferables } = deconstructTransfer(resultValue);\n    const resultMessage = {\n        type: messages_1.WorkerMessageType.result,\n        uid,\n        complete: completed ? true : undefined,\n        payload\n    };\n    implementation_1.default.postMessageToMaster(resultMessage, transferables);\n}\nfunction postJobStartMessage(uid, resultType) {\n    const startMessage = {\n        type: messages_1.WorkerMessageType.running,\n        uid,\n        resultType\n    };\n    implementation_1.default.postMessageToMaster(startMessage);\n}\nfunction postUncaughtErrorMessage(error) {\n    try {\n        const errorMessage = {\n            type: messages_1.WorkerMessageType.uncaughtError,\n            error: common_1.serialize(error)\n        };\n        implementation_1.default.postMessageToMaster(errorMessage);\n    }\n    catch (subError) {\n        // tslint:disable-next-line no-console\n        console.error(\"Not reporting uncaught error back to master thread as it \" +\n            \"occured while reporting an uncaught error already.\" +\n            \"\\nLatest error:\", subError, \"\\nOriginal error:\", error);\n    }\n}\nfunction runFunction(jobUID, fn, args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let syncResult;\n        try {\n            syncResult = fn(...args);\n        }\n        catch (error) {\n            return postJobErrorMessage(jobUID, error);\n        }\n        const resultType = isObservable(syncResult) ? \"observable\" : \"promise\";\n        postJobStartMessage(jobUID, resultType);\n        if (isObservable(syncResult)) {\n            const subscription = syncResult.subscribe(value => postJobResultMessage(jobUID, false, common_1.serialize(value)), error => {\n                postJobErrorMessage(jobUID, common_1.serialize(error));\n                activeSubscriptions.delete(jobUID);\n            }, () => {\n                postJobResultMessage(jobUID, true);\n                activeSubscriptions.delete(jobUID);\n            });\n            activeSubscriptions.set(jobUID, subscription);\n        }\n        else {\n            try {\n                const result = yield syncResult;\n                postJobResultMessage(jobUID, true, common_1.serialize(result));\n            }\n            catch (error) {\n                postJobErrorMessage(jobUID, common_1.serialize(error));\n            }\n        }\n    });\n}\n/**\n * Expose a function or a module (an object whose values are functions)\n * to the main thread. Must be called exactly once in every worker thread\n * to signal its API to the main thread.\n *\n * @param exposed Function or object whose values are functions\n */\nfunction expose(exposed) {\n    if (!implementation_1.default.isWorkerRuntime()) {\n        throw Error(\"expose() called in the master thread.\");\n    }\n    if (exposeCalled) {\n        throw Error(\"expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.\");\n    }\n    exposeCalled = true;\n    if (typeof exposed === \"function\") {\n        implementation_1.default.subscribeToMasterMessages(messageData => {\n            if (isMasterJobRunMessage(messageData) && !messageData.method) {\n                runFunction(messageData.uid, exposed, messageData.args.map(common_1.deserialize));\n            }\n        });\n        postFunctionInitMessage();\n    }\n    else if (typeof exposed === \"object\" && exposed) {\n        implementation_1.default.subscribeToMasterMessages(messageData => {\n            if (isMasterJobRunMessage(messageData) && messageData.method) {\n                runFunction(messageData.uid, exposed[messageData.method], messageData.args.map(common_1.deserialize));\n            }\n        });\n        const methodNames = Object.keys(exposed).filter(key => typeof exposed[key] === \"function\");\n        postModuleInitMessage(methodNames);\n    }\n    else {\n        throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${exposed}`);\n    }\n    implementation_1.default.subscribeToMasterMessages(messageData => {\n        if (isMasterJobCancelMessage(messageData)) {\n            const jobUID = messageData.uid;\n            const subscription = activeSubscriptions.get(jobUID);\n            if (subscription) {\n                subscription.unsubscribe();\n                activeSubscriptions.delete(jobUID);\n            }\n        }\n    });\n}\nexports.expose = expose;\nif (typeof self !== \"undefined\" && typeof self.addEventListener === \"function\" && implementation_1.default.isWorkerRuntime()) {\n    self.addEventListener(\"error\", event => {\n        // Post with some delay, so the master had some time to subscribe to messages\n        setTimeout(() => postUncaughtErrorMessage(event.error || event), 250);\n    });\n    self.addEventListener(\"unhandledrejection\", event => {\n        const error = event.reason;\n        if (error && typeof error.message === \"string\") {\n            // Post with some delay, so the master had some time to subscribe to messages\n            setTimeout(() => postUncaughtErrorMessage(error), 250);\n        }\n    });\n}\nif (typeof process !== \"undefined\" && typeof process.on === \"function\" && implementation_1.default.isWorkerRuntime()) {\n    process.on(\"uncaughtException\", (error) => {\n        // Post with some delay, so the master had some time to subscribe to messages\n        setTimeout(() => postUncaughtErrorMessage(error), 250);\n    });\n    process.on(\"unhandledRejection\", (error) => {\n        if (error && typeof error.message === \"string\") {\n            // Post with some delay, so the master had some time to subscribe to messages\n            setTimeout(() => postUncaughtErrorMessage(error), 250);\n        }\n    });\n}\n","module.exports = require(\"./dist/observable\")\n","module.exports = __WEBPACK_EXTERNAL_MODULE__276__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","importScripts('openhps-core.min.js'); __WEBPACK_EXTERNAL_MODULE____ = self.OpenHPS.core;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"reflect-metadata\");\nconst observable_1 = require(\"threads/observable\");\nconst threads_1 = require(\"threads\");\nconst WorkerBase_1 = require(\"./WorkerBase\");\nconst worker = new WorkerBase_1.WorkerBase();\n(0, threads_1.expose)({\n    /**\n     * Worker initialization\n     *\n     * @param {WorkerData} config Worker data containing model information\n     * @returns {Promise<void>} Initialize promise\n     */\n    init(config) {\n        return worker.init(config);\n    },\n    /**\n     * Pull from this work\n     *\n     * @param {PullOptions} [options] Pull options\n     * @returns {Promise<void>} Pull promise\n     */\n    pull(options) {\n        return worker.pull(options);\n    },\n    /**\n     * Push to this worker\n     *\n     * @param {DataFrame} frame Data frame\n     * @param {PushOptions} [options] Push options\n     * @returns {Promise<void>} Push promise\n     */\n    push(frame, options) {\n        return worker.push(frame, options);\n    },\n    /**\n     * Input observable for pull requests\n     *\n     * @returns {Observable<void>} Observable input\n     */\n    pullOutput() {\n        return observable_1.Observable.from(worker.pullOutput);\n    },\n    /**\n     * Output observable for push events\n     *\n     * @returns {Observable<any>} Observable output\n     */\n    pushOutput() {\n        return observable_1.Observable.from(worker.pushOutput);\n    },\n    eventOutput() {\n        return observable_1.Observable.from(worker.eventOutput);\n    },\n    eventInput(name, event) {\n        worker.model.emit(name, event);\n    },\n    /**\n     * Outgoing call to a service on the main thread\n     *\n     * @returns {Observable<WorkerServiceCall>} Observable of outgoing service calls\n     */\n    serviceOutputCall() {\n        return observable_1.Observable.from(worker.serviceOutputCall);\n    },\n    /**\n     * Response to an outgoing service call from the main thread\n     *\n     * @param {WorkerServiceResponse} input Service response\n     */\n    serviceOutputResponse(input) {\n        worker.serviceOutputResponse.next(input);\n    },\n    serviceInputCall(call) {\n        return worker.callService(call);\n    },\n    findAllServices() {\n        return worker.findAllServices();\n    },\n});\nexports.default = worker;\n//# sourceMappingURL=WorkerRunner.js.map"],"names":["root","factory","exports","module","require","define","amd","a","i","self","this","__WEBPACK_EXTERNAL_MODULE__276__","Object","defineProperty","value","WorkerBase","observable_1","__1","constructor","pullOutput","Subject","pushOutput","serviceOutputCall","serviceOutputResponse","eventOutput","setShape","shape","init","config","Promise","resolve","reject","__dirname","directory","imports","length","importFn","forEach","importFile","modelBuilder","ModelBuilder","create","services","service","dataType","DataType","DataSerializer","findTypeByName","addService","DummyDataService","uid","WorkerServiceProxy","callObservable","responseObservable","DummyService","_initModel","path","undefined","serialized","traversalBuilder","from","modelOrNode","ModelSerializer","deserializeNode","via","to","builder","builderCallback","eval","args","graph","join","addShape","default","build","then","m","model","catch","pull","options","push","frame","deserialize","internalSource","CallbackSourceNode","next","internalSink","CallbackSinkNode","serialize","deleteNode","on","event","name","addNode","findAllServices","filter","map","serviceBase","getPrototypeOf","type","DataService","driver","callService","call","findDataService","serviceUID","findService","method","serializedParams","parameters","params","param","promise","_","Array","isArray","result","r","id","success","ex","webpackEmptyContext","req","e","Error","code","keys","formatArgs","useColors","namespace","humanize","diff","c","color","splice","index","lastC","replace","match","save","namespaces","storage","setItem","removeItem","error","load","getItem","process","env","DEBUG","window","__nwjs","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","localStorage","localstorage","destroy","warned","warn","colors","log","debug","formatters","j","v","JSON","stringify","message","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","curr","Number","Date","ms","prev","coerce","unshift","format","formatter","val","apply","selectColor","extend","enumerable","configurable","get","set","delimiter","newDebug","toNamespace","regexp","toString","substring","stack","disable","names","skips","enable","split","len","slice","test","key","hash","charCodeAt","Math","abs","Symbol","observable","s","h","d","w","y","plural","msAbs","n","isPlural","round","str","String","exec","parseFloat","parse","isFinite","long","fmtLong","fmtShort","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","done","AsyncSerialScheduler","observer","_baseObserver","_pendingPromises","Set","complete","all","schedule","task","prevPromisesCompletion","values","delete","add","hasSymbols","hasSymbol","Boolean","getSymbol","asyncIterator","for","SymbolIterator","SymbolObservable","SymbolSpecies","getMethod","obj","TypeError","getSpecies","ctor","Observable","hostReportError","setTimeout","enqueue","fn","cleanupSubscription","subscription","cleanup","_cleanup","unsubscribe","closeSubscription","_observer","_queue","_state","notifySubscription","onNotify","queue","item","flushSubscription","Subscription","subscriber","subscriptionObserver","SubscriptionObserver","closed","_subscription","_subscriber","subscribe","nextOrObserver","onError","onComplete","pipe","first","mappers","intermediate","mapper","tap","tapObserver","start","propagatedValue","reduce","seed","C","hasSeed","arguments","hasValue","acc","concat","sources","startNext","flatMap","subscriptions","outer","normalizedValue","inner","innerValue","indexOf","completeIfDone","static","x","observableMethod","isObservable","iteratorMethod","items","symbol","scheduler","input","__asyncValues","o","__values","iterator","verb","settle","e_1","_a","mapped","thing","isAsyncIterator","mapped_1_1","mapped_1","element","e_1_1","return","output","interval","period","counter","handle","setInterval","clearInterval","observables","completed","unsubscribeAll","MulticastSubject","super","_observers","coldObservable","subject","sourceSubscription","subscriberCount","accumulator","accumulated","prevAcc","Reflect","g","Function","exporter","makeExporter","target","previous","writable","hasOwn","prototype","hasOwnProperty","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","supportsCreate","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","has","functionPrototype","usePolyfill","_Map","Map","entries","CreateMapPolyfill","_Set","CreateSetPolyfill","Metadata","WeakMap","CreateWeakMapPolyfill","decorate","decorators","propertyKey","attributes","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","DecorateProperty","ToPropertyKey","metadata","metadataKey","metadataValue","decorator","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","getMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","size","targetMetadata","decorated","descriptor","O","Create","MetadataKey","parent","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","_i","ownKeys_1","parentKeys_1","GetIterator","k","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","IsSymbol","ToPrimitive","PreferredType","hint","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","valueOf","toString_2","argument","ToString","V","func","iterResult","f","proto","prototypeProto","cacheSentinel","arraySentinel","MapIterator","selector","_index","_keys","_values","_selector","throw","_cacheKey","_cacheIndex","_find","clear","getKey","getValue","getEntry","insert","_map","UUID_SIZE","rootKey","CreateUniqueKey","_key","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","random","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","data","offset","byte","__","registerSerializer","serializers_1","registeredSerializer","DefaultSerializer","serializer","extendSerializer","__createBinding","k2","__exportStar","p","Transfer","expose","common_1","index_1","transferable_1","bundleURL","getBaseURL","url","getBundleURL","err","matches","isWorkerRuntime","getWorkerImplementation","defaultPoolSize","get_bundle_url_browser_1","hardwareConcurrency","isAbsoluteURL","createSourceBlobURL","blob","Blob","URL","createObjectURL","implementation","Worker","NoWebWorker","WebWorker","_b","_baseURL","CORSWorkaround","BlobWorker","source","selectWorkerImplementation","isWindowContext","Window","postMessage","Thread","spawn","Pool","implementation_1","pool_1","spawn_1","thread_1","__importDefault","mod","__esModule","createProxyModule","createProxyFunction","debug_1","observable_fns_1","observable_promise_1","messages_1","debugMessages","nextJobUID","createObservableForJob","worker","jobUID","asyncType","messageHandler","WorkerMessageType","running","resultType","isJobResultMessage","payload","removeEventListener","isJobErrorMessage","addEventListener","cancelMessage","MasterMessageType","cancel","rawArgs","transferables","arg","isTransferDescriptor","send","array","prepareArguments","runMessage","run","ObservablePromise","multicast","methodNames","proxy","methodName","PoolEventType","ponyfills_1","pool_types_1","nextPoolID","WorkerPool","spawnWorker","optionsOrSize","eventSubject","initErrors","isClosing","nextTaskID","taskQueue","text","trim","workers","count","createArray","runningTasks","spawnWorkers","eventObservable","initialized","findIdlingWorker","concurrency","find","runPoolTask","workerID","taskStart","taskID","returnValue","taskCompleted","taskFailed","runPromise","someRunPromise","scheduleWork","availableWorker","nextTask","shift","taskQueueDrained","taskCompletion","eventSubscription","events","terminated","settled","allowResolvingImmediately","getCurrentlyRunningTasks","flattened","taskFailures","failureSubscription","allSettled","settlementPromise","earlyExitPromise","errors","race","taskFunction","maxQueuedJobs","Infinity","someTask","taskCanceled","bind","taskQueued","terminate","force","remainingQueue","PoolConstructor","EventType","promise_1","symbols_1","master_1","invocation_proxy_1","debugSpawn","debugThreadUtils","initMessageTimeout","THREADS_WORKER_INIT_TIMEOUT","setPrivateThreadProps","raw","workerEvents","workerErrors","WorkerEventType","internalError","errorEvent","assign","$errors","$events","$terminate","$worker","timeout","initMessage","timeoutInMs","errorMessage","timeoutHandle","clearTimeout","withTimeout","isUncaughtErrorMessage","receiveInitMessage","exposed","termination","resolver","createPromiseWithResolver","createTerminator","workerTermination","messageEvent","workerEvent","rejectionHandler","reason","terminationEvent","createEventObservable","methods","fail","thread","doNothing","returnInput","runDeferred","originalObserver","onCompletion","onNext","initHasRun","fulfillmentCallbacks","rejectionCallbacks","firstValueSet","state","firstValue","rejection","onRejected","onFulfilled","onFulfilledRaw","onRejectedRaw","onRejectedCalled","rejectionCallback","anotherError","finally","onCompleted","handler","isThenable","$observers","someObserver","onFulfill","status","onReject","itemPromise","resolvedTo","alreadyResolved","fallbackDeserializer","fallbackSerializer","DefaultErrorSerializer","__error_marker","$transferable","postMessageToMaster","transferList","subscribeToMasterMessages","onMessage","is_observable_1","common_2","transferable_2","exposeCalled","activeSubscriptions","isMasterJobRunMessage","isZenObservable","deconstructTransfer","postJobErrorMessage","rawError","postJobResultMessage","resultValue","resultMessage","postUncaughtErrorMessage","uncaughtError","subError","runFunction","syncResult","startMessage","postJobStartMessage","messageData","postFunctionInitMessage","postModuleInitMessage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","globalThis","prop","toStringTag","importScripts","__WEBPACK_EXTERNAL_MODULE____","OpenHPS","core","threads_1","eventInput","emit","serviceInputCall"],"sourceRoot":""}